{"version":3,"sources":["App.jsx","config/index.js","serviceWorker.js","index.js"],"names":["App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","user","playlists","auth","dupes","selected","_this2","window","location","hash","hashMap","access_token","token_type","expires_in","substring","split","forEach","item","i","fetch","headers","Authorization","concat","then","res","json","firstIndex","indexOf","length","lastIndex","lastIndexOf","setState","href","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","abrupt","stop","_x2","apply","arguments","_ref2","_callee2","response","items","tracks","_context2","_this3","name","Map","checkForDuplicateItems","sent","_x3","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","track","value","artist","artists","findArtistName","indexName","album","has","push","old","get","new","set","err","return","artistArray","result","_this4","react_default","createElement","map","index","key","onClick","handleClick","ulName","style","paddingBottom","paddingLeft","replace","encodeURIComponent","credentials","React","Component","Boolean","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8770ede4.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\nimport client_id from './config';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: '',\n      playlists: [],\n      auth: '',\n      dupes: [],\n      selected: ''\n    };\n  }\n\n  componentDidMount() {\n    if (window.location.hash) {\n      const hashMap = {\n        access_token: '',\n        token_type: '',\n        expires_in: ''\n      };\n      window.location.hash.substring(1).split('&').forEach(item => {\n        const i = item.split('=');\n        hashMap[i[0]] = i[1];\n      });\n      fetch('https://api.spotify.com/v1/me/playlists', {\n        headers: {\n          'Authorization': `${hashMap['token_type']} ${hashMap['access_token']}`\n        }\n      })\n        .then((res => res.json()))\n        .then(res => {\n          const firstIndex = res['href'].indexOf('https://api.spotify.com/v1/users/') + 'https://api.spotify.com/v1/users/'.length;\n          const lastIndex = res['href'].lastIndexOf('/');\n          this.setState({\n            user: res['href'].substring(firstIndex, firstIndex + (lastIndex - firstIndex)),\n            playlists: res['items'],\n            auth: `${hashMap['token_type']} ${hashMap['access_token']}`\n          });\n        })\n    }\n  }\n\n  async handleClick(item) {\n    this.setState({ dupes: [] });\n    await fetch(item.href, {\n      headers: {\n        'Authorization': this.state.auth\n      }\n    })\n      .then(async res => res.json())\n      .then(async response => {\n        this.setState({ selected: response.name });\n        const items = response.tracks.items;\n        const tracks = new Map();\n        const dupes = [];\n        this.checkForDuplicateItems(items, tracks, dupes);\n        let next = response.tracks.next;\n        while (next !== null) {\n          const res = await fetch(next, {\n            headers: { 'Authorization': this.state.auth }\n          }).then(res => res.json());\n          if (res && res.items) {\n            this.checkForDuplicateItems(res.items, tracks, dupes);\n          }\n          next = res.next;\n        }\n        if (dupes.length > 0) {\n          this.setState({ dupes });\n        }\n      });\n  }\n\n  checkForDuplicateItems(items, tracks, dupes) {\n    for (const item of items) {\n      const track = item.track;\n      const name = track.name;\n      const artist = track.artists.length === 1 ? track.artists[0].name : this.findArtistName(track.artists);\n      const indexName = `${name} by ${artist}`;\n      const album = track.album.name;\n      if (!tracks.has(indexName)) {\n        tracks.set(indexName, {\n          album,\n          name,\n          artist\n        });\n      } else {\n        dupes.push({\n          old: {\n            indexName,\n            name: tracks.get(indexName) ? tracks.get(indexName).name : tracks.get(indexName),\n            artist: tracks.get(indexName) ? tracks.get(indexName).artist : tracks.get(indexName),\n            album: tracks.get(indexName) ? tracks.get(indexName).album : tracks.get(indexName)\n          },\n          new: {\n            indexName,\n            name,\n            album,\n            artist,\n          }\n        });\n      }\n    }\n  }\n\n  findArtistName(artistArray) {\n    let result = '';\n    for (let i = 0; i < artistArray.length; i++) {\n      result += artistArray[i].name;\n      if (i + 1 < artistArray.length) {\n        if (i + 2 < artistArray.length) {\n          result += ', ';\n        } else {\n          result += ' and ';\n        }\n      }\n    }\n    return result;\n  }\n\n  render() {\n    if (!window.location.hash) {\n      window.location.replace(`https://accounts.spotify.com/authorize` +\n        `?response_type=token&client_id=${client_id}` +\n        `&scope=${encodeURIComponent('user-read-private user-read-email')}` +\n        `&redirect_uri=${encodeURIComponent('https://bgoff1-projects.github.io/spotify-playlist-groomer/')}`, {\n          credentials: 'include'\n        });\n      return null;\n    }\n    return <div>\n      {this.state.user}\n      <ul>\n        {this.state.playlists.map((item, index) => <li key={'playlist name ' + item.name} onClick={() => this.handleClick(item)}>{item.name}</li>)}\n      </ul>\n      <hr />\n      {this.state.selected ?\n        <span>\n          <h3>Dupliates for {this.state.selected}</h3>\n          {this.state.dupes.length === 0 ? 'None' :\n            <div>\n              {this.state.dupes.map((item) => {\n                const name = item.old.indexName.split(' by ');\n                const ulName = <span><i>{name[0]}</i> by <strong>{name[1]}</strong></span>\n                return <span key={item.old.indexName}>\n                  <span>{ulName}</span>\n                  <div style={{ paddingBottom: '2em' }}>\n                    <div style={{ paddingLeft: '2em' }}>Old:\n                      <div style={{ paddingLeft: '2em' }}>\n                        <div>\n                          Name: {item.old.name}\n                        </div>\n                        <div>\n                          Album: {item.old.album}\n                        </div>\n                        <div>\n                          Artist(s): {item.old.artist}\n                        </div>\n                      </div>\n                    </div>\n                    <div style={{ paddingLeft: '2em' }}>New:\n                      <div style={{ paddingLeft: '2em' }}>\n                        <div>\n                          Name: {item.new.name}\n                        </div>\n                        <div>\n                          Album: {item.new.album}\n                        </div>\n                        <div>\n                          Artist(s): {item.new.artist}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </span>\n              })\n              }\n            </div>}\n        </span> : ''}\n\n    </div>;\n  }\n}\n\nexport default App;\n","const clientid = '0a85ee7f3e4a4855bf688d8191a1edf9';\r\n\r\nexport default clientid;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}